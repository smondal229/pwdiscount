{% comment %}
  Cart discount widget block
  Milestone C: reads an app-owned shop metafield
  `shop.metafields.volume_discount.headline` (a simple string)
  that is derived from the JSON rules used by the Function.
{% endcomment %}

{% schema %}
{
  "name": "Cart discount widget",
  "target": "section",
  "settings": []
}
{% endschema %}

{% assign vd_headline_metafield = shop.metafields.volume_discount.headline %}
{% if vd_headline_metafield and vd_headline_metafield.value != blank %}
  <div class="pwdiscount-cart-widget">
    <h3>{{ vd_headline_metafield.value }}</h3>
    <p>Discount applies automatically to eligible products in your cart.</p>
  </div>
{% else %}
  <div class="pwdiscount-cart-widget">
    <h3>Volume discount</h3>
    <p>Add more items to see if a volume discount applies.</p>
  </div>
{% endif %}

